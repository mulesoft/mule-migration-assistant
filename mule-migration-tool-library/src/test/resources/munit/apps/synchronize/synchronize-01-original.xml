<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:http="http://www.mulesoft.org/schema/mule/http"
      xmlns:synchronize="http://www.mulesoft.org/schema/mule/synchronize"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:munit="http://www.mulesoft.org/schema/mule/munit"
      xmlns="http://www.mulesoft.org/schema/mule/core"
      xmlns:spring="http://www.springframework.org/schema/beans"
      xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
    http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
    http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
    http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
    http://www.mulesoft.org/schema/mule/synchronize http://www.mulesoft.org/schema/mule/synchronize/current/mule-synchronize.xsd">
    <munit:config name="munit" mock-connectors="false" mock-inbounds="false" />

    <spring:beans>
        <spring:import resource="classpath:mule-synchronize-config.xml" />
    </spring:beans>

    <http:request-config name="HTTP_Request_Configuration" host="localhost" port="${http.port}" />
    <http:request-config name="HTTP_Request_Configuration1" host="localhost" port="8081" basePath="/api" />

    <munit:test name="get:/artist:testapiexceptions-config-200-application/json-FlowTest" description="Verifying functionality of [get:/artist:testapiexceptions-config-200-application/json]">
        <logger message="#[payload]" />
        <synchronize:run-and-wait >
            <http:request config-ref="HTTP_Request_Configuration1" path="/artist" method="GET" />
        </synchronize:run-and-wait>
        <object-to-string-transformer  />
    </munit:test>

</mule>
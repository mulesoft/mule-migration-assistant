{
  "tasks":
  [
    {
      "xpathSelector" : "//http:request-config",
      "taskDescriptor" : "Update HTTP Request Configuration",
      "stepsDefinition" : [
        {
          "stepDescriptor" : "Create 'request-connection' child node",
          "type" : "com.mulesoft.tools.migration.library.step.CreateChildNode",
          "parameters" : {
            "name" : "request-connection"
          }
        },
        {
          "stepDescriptor" : "Rename 'tlsContext-ref' attribute to 'tlsContext'",
          "type" : "com.mulesoft.tools.migration.library.step.UpdateAttributeName",
          "parameters" : {
            "attributeName" : "tlsContext-ref",
            "newName" : "tlsContext"
          }
        },
        {
          "stepDescriptor" : "Rename 'clientSocketProperties-ref' attribute to clientSocketProperties",
          "type" : "com.mulesoft.tools.migration.library.step.UpdateAttributeName",
          "parameters" : {
            "attributeName" : "clientSocketProperties-ref",
            "newName" : "clientSocketProperties"
          }
        },
        {
          "stepDescriptor" : "Move 'request-config' attributes to 'request-connection' child node, host;protocol;port;basePath;usePersistentConnections;connectionIdleTimeout;responseTimeout;tlsContext;clientSocketProperties",
          "type" : "com.mulesoft.tools.migration.library.step.MoveAttributesToChildNode",
          "parameters" : {
            "attributes" : "host;protocol;port;basePath;usePersistentConnections;connectionIdleTimeout;responseTimeout;tlsContext;clientSocketProperties",
            "childNode" : "request-connection"
          }
        },
        {
          "stepDescriptor" : "Move 'tls' node to 'request-connection' child node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToChildNode",
          "parameters" : {
            "sourceNode" : "context",
            "sourceNodeNamespace" : "tls",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/tls",
            "targetNode" : "request-connection",
            "targetNodeNamespace" : "http",
            "targetNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        },
        {
          "stepDescriptor" : "Move 'proxy' node to 'request-connection' child node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToChildNode",
          "parameters" : {
            "sourceNode" : "proxy",
            "sourceNodeNamespace" : "http",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http",
            "targetNode" : "request-connection",
            "targetNodeNamespace" : "http",
            "targetNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        },
        {
          "stepDescriptor" : "Move 'ntlm-proxy' node to 'request-connection' child node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToChildNode",
          "parameters" : {
            "sourceNode" : "ntlm-proxy",
            "sourceNodeNamespace" : "http",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http",
            "targetNode" : "request-connection",
            "targetNodeNamespace" : "http",
            "targetNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        },
        {
          "stepDescriptor" : "Move 'basic-authentication' node to 'request-connection' child node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToChildNode",
          "parameters" : {
            "sourceNode" : "basic-authentication",
            "sourceNodeNamespace" : "http",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http",
            "targetNode" : "request-connection",
            "targetNodeNamespace" : "http",
            "targetNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        },
        {
          "stepDescriptor" : "Move 'ntlm-authentication' node to 'request-connection' child node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToChildNode",
          "parameters" : {
            "sourceNode" : "ntlm-authentication",
            "sourceNodeNamespace" : "http",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http",
            "targetNode" : "request-connection",
            "targetNodeNamespace" : "http",
            "targetNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        },
        {
          "stepDescriptor" : "Move 'digest-authentication' node to 'request-connection' child node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToChildNode",
          "parameters" : {
            "sourceNode" : "digest-authentication",
            "sourceNodeNamespace" : "http",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http",
            "targetNode" : "request-connection",
            "targetNodeNamespace" : "http",
            "targetNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        },
        {
          "stepDescriptor" : "Move 'client-socket-properties' node to 'request-connection' child node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToChildNode",
          "parameters" : {
            "sourceNode" : "client-socket-properties",
            "sourceNodeNamespace" : "tcp",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/tcp",
            "targetNode" : "request-connection",
            "targetNodeNamespace" : "http",
            "targetNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        }
      ]
    },
    {
      "xpathSelector" : "//http:request-connection",
      "taskDescriptor" : "Update HTTP Request Connection elements",
      "stepsDefinition" : [
        {
          "stepDescriptor" : "Move 'client-socket-properties' node to 'client-socket-properties' new child node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToNewChildNode",
          "parameters" : {
            "sourceNode" : "client-socket-properties",
            "sourceNodeNamespace" : "tcp",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/tcp",
            "targetNode" : "client-socket-properties",
            "targetNodeNamespace" : "http",
            "targetNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        },
        {
          "stepDescriptor" : "Move 'proxy' node to 'proxy-config' new child node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToNewChildNode",
          "parameters" : {
            "sourceNode" : "proxy",
            "sourceNodeNamespace" : "http",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http",
            "targetNode" : "proxy-config",
            "targetNodeNamespace" : "http",
            "targetNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        },
        {
          "stepDescriptor" : "Move 'ntlm-proxy' node to 'proxy-config' new child node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToNewChildNode",
          "parameters" : {
            "sourceNode" : "ntlm-proxy",
            "sourceNodeNamespace" : "http",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http",
            "targetNode" : "proxy-config",
            "targetNodeNamespace" : "http",
            "targetNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        },
        {
          "stepDescriptor" : "Move 'basic-authentication' node to 'authentication' new child node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToNewChildNode",
          "parameters" : {
            "sourceNode" : "basic-authentication",
            "sourceNodeNamespace" : "http",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http",
            "targetNode" : "authentication",
            "targetNodeNamespace" : "http",
            "targetNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        },
        {
          "stepDescriptor" : "Move 'ntlm-authentication' node to 'authentication' new child node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToNewChildNode",
          "parameters" : {
            "sourceNode" : "ntlm-authentication",
            "sourceNodeNamespace" : "http",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http",
            "targetNode" : "authentication",
            "targetNodeNamespace" : "http",
            "targetNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        },
        {
          "stepDescriptor" : "Move 'digest-authentication' node to 'authentication' new child node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToNewChildNode",
          "parameters" : {
            "sourceNode" : "digest-authentication",
            "sourceNodeNamespace" : "http",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http",
            "targetNode" : "authentication",
            "targetNodeNamespace" : "http",
            "targetNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        }
      ]
    },
    {
      "xpathSelector" : "//http:request-builder",
      "taskDescriptor" : "Update HTTP Request Builder ",
      "stepsDefinition" : [
        {
          "stepDescriptor" : "Create 'headers' node with MEL content from 'header' nodes",
          "type" : "com.mulesoft.tools.migration.library.step.CreateMELNodeFromAttributes",
          "parameters" : {
            "originalNode" : "header",
            "newNodeName" : "headers",
            "newNodeNamespace" : "http",
            "newNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http",
            "attributeKeyName" : "headerName",
            "attributeValueName" : "value"
          }
        },
        {
          "stepDescriptor" : "Move 'headers' node to parent node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToParentNode",
          "parameters" : {
            "sourceNode" : "headers",
            "sourceNodeNamespace" : "http",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        },
        {
          "stepDescriptor" : "Create 'query-params' node with MEL content from 'query-param' nodes",
          "type" : "com.mulesoft.tools.migration.library.step.CreateMELNodeFromAttributes",
          "parameters" : {
            "originalNode" : "query-param",
            "newNodeName" : "query-params",
            "newNodeNamespace" : "http",
            "newNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http",
            "attributeKeyName" : "paramName",
            "attributeValueName" : "value"
          }
        },
        {
          "stepDescriptor" : "Move 'query-params' node to parent node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToParentNode",
          "parameters" : {
            "sourceNode" : "query-params",
            "sourceNodeNamespace" : "http",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        },
        {
          "stepDescriptor" : "Create 'uri-params' node with MEL content from 'uri-param' nodes",
          "type" : "com.mulesoft.tools.migration.library.step.CreateMELNodeFromAttributes",
          "parameters" : {
            "originalNode" : "uri-param",
            "newNodeName" : "uri-params",
            "newNodeNamespace" : "http",
            "newNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http",
            "attributeKeyName" : "paramName",
            "attributeValueName" : "value"
          }
        },
        {
          "stepDescriptor" : "Move 'uri-params' node to parent node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToParentNode",
          "parameters" : {
            "sourceNode" : "uri-params",
            "sourceNodeNamespace" : "http",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        }
      ]
    },
    {
      "xpathSelector" : "//http:request",
      "taskDescriptor" : "Update HTTP Request Components",
      "stepsDefinition" : [
        {
          "stepDescriptor" : "Move 'success-status-code-validator' node to 'response-validator' child node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToNewChildNode",
          "parameters" : {
            "sourceNode" : "success-status-code-validator",
            "sourceNodeNamespace" : "http",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http",
            "targetNode" : "response-validator",
            "targetNodeNamespace" : "http",
            "targetNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        },
        {
          "stepDescriptor" : "Move 'failure-status-code-validator' node to 'response-validator' child node",
          "type" : "com.mulesoft.tools.migration.library.step.MoveNodeToNewChildNode",
          "parameters" : {
            "sourceNode" : "failure-status-code-validator",
            "sourceNodeNamespace" : "http",
            "sourceNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http",
            "targetNode" : "response-validator",
            "targetNodeNamespace" : "http",
            "targetNodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        },
        {
          "stepDescriptor" : "Delete 'request-builder' child node",
          "type" : "com.mulesoft.tools.migration.library.step.DeleteChildNode",
          "parameters" : {
            "node" : "request-builder",
            "nodeNamespace" : "http",
            "nodeNamespaceUri" : "http://www.mulesoft.org/schema/mule/http"
          }
        }
      ]
    },
    {
      "xpathSelector" : "//http:headers",
      "taskDescriptor" : "Update HTTP Headers ",
      "stepsDefinition" : [
        {
          "stepDescriptor" : "Move headers 'expression' attribute to MEL node content",
          "type" : "com.mulesoft.tools.migration.library.step.MoveAttributeToMELContent",
          "parameters" : {
            "attributeName" : "expression"
          }
        },
        {
          "stepDescriptor" : "Update Mule Message structure",
          "type" : "com.mulesoft.tools.migration.library.step.UpdateMuleMessageContent",
          "parameters" : {}
        }
      ]
    },
    {
      "xpathSelector" : "//http:uri-params",
      "taskDescriptor" : "Update HTTP URI Parameters",
      "stepsDefinition" : [
        {
          "stepDescriptor" : "Move uri-params 'expression' attribute to MEL node content",
          "type" : "com.mulesoft.tools.migration.library.step.MoveAttributeToMELContent",
          "parameters" : {
            "attributeName" : "expression"
          }
        },
        {
          "stepDescriptor" : "Update Mule Message structure",
          "type" : "com.mulesoft.tools.migration.library.step.UpdateMuleMessageContent",
          "parameters" : {}
        }
      ]
    },
    {
      "xpathSelector" : "//http:query-params",
      "taskDescriptor" : "Update HTTP Query Parameters",
      "stepsDefinition" : [
        {
          "stepDescriptor" : "Move query-params 'expression' attribute to MEL node content",
          "type" : "com.mulesoft.tools.migration.library.step.MoveAttributeToMELContent",
          "parameters" : {
            "attributeName" : "expression"
          }
        },
        {
          "stepDescriptor" : "Update Mule Message structure",
          "type" : "com.mulesoft.tools.migration.library.step.UpdateMuleMessageContent",
          "parameters" : {}
        }
      ]
    }
  ]
}
